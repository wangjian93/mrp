<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>DPS版本</title>
    <link rel="stylesheet" href="../../../assets/libs/layui/css/layui.css"/>
    <link rel="stylesheet" href="../../../assets/module/admin.css?v=318"/>
    <!--[if lt IE 9]>
    <script src="../../../assets/libs/html5shiv/html5shiv.min.js"></script>
    <script src="../../../assets/libs/respond/respond.min.js"></script>
    <![endif]-->
</head>
<body>
<!-- 正文开始 -->
<div class="layui-fluid">
    <div class="layui-card">
        <div class="layui-card-header"><i class="layui-icon layui-icon-tabs"></i> DPS版本信息</div>
        <div class="layui-card-body">
            <div id="flowDemo" style="height: 100px;overflow-y:scroll;"></div>
        </div>
    </div>
</div>

<!-- js部分 -->
<script type="text/javascript" src="../../../assets/libs/layui/layui.js"></script>
<script type="text/javascript" src="../../../assets/js/common.js?v=318"></script>
<script>
    layui.use('flow', function(){
        var $ = layui.$;
        var flow = layui.flow;
        //信息流
        flow.load({
            elem: '#flowDemo', //指定列表容器
            scrollElem: '#flowDemo',
            mb: 150,
            done: function(page, next){ //到达临界点（默认滚动触发），触发下一页
                var lis = [];
                var limit = 3;
                //以jQuery的Ajax请求为例，请求下一页数据（注意：page是从2开始返回）
                $.get('/mrp/dps/queryDpsVer?limit='+limit+'&page='+page, function(res){
                    //假设你的列表返回在data集合中
                    layui.each(res.data, function(index, item){
                        lis.push('<li>'+ item.ver +'</li>');
                    });

                    //执行下一页渲染，第二参数为：满足“加载更多”的条件，即后面仍有分页
                    //pages为Ajax返回的总页数，只有当前页小于总页数的情况下，才会继续出现加载更多
                    var count = res.count;
                    var pages = count / limit;
                    if(count % limit > 0) {
                        pages+=1;
                    }
                    next(lis.join(''), page < pages);
                });
            }
        });
    });
</script>
</body>
</html>